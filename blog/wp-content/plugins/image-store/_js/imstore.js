jQuery(document).ready(function(a){function b(b,c){b=a(c).is(":checked")?"&c="+b+"":"";a(".image-color input").not("#"+a(c).attr("id")).removeAttr("checked");a(".image-wrapper img").animate({opacity:0},400,function(){img=new Image;img.src=a(".image-wrapper img").attr("src").replace("&c=g","").replace("&c=s","")+b;a(".image-wrapper img").replaceWith(img).delay(900/1.5).animate({opacity:1},700)})}a(".ims-add-error").hide();a("#ims-pricelist").hide();slcttxt=a(".ims-image-count").html();a(".ims-select-all a").click(function(){a(".ims-innerbox [type='checkbox']").attr("checked","checked");return false});a(".ims-unselect-all a").click(function(){a(".ims-innerbox [type='checkbox']").removeAttr("checked");return false});a(".add-to-favorite a").click(function(){imgids=a(".ims-innerbox input:checked").map(function(){return a(this).val()}).get().join(",");a.get(imstore.imstoreurl+"/ajax.php",{_wpnonce:imstore.ajaxnonce,galid:imstore.galid,action:"favorites",imgids:imgids},function(b){response=b.split("|");a(".ims-message").fadeOut().removeClass("ims-error").removeClass("ims-success").addClass(response[1]).html(response[0]).fadeIn()});return false});a(".remove-from-favorite a").click(function(){imgids=a(".ims-innerbox input:checked").map(function(){return a(this).val()}).get().join(",");a(".ims-innerbox input:checked").each(function(){a(this).parents("dt,li,figure").remove()});a.get(imstore.imstoreurl+"/ajax.php",{_wpnonce:imstore.ajaxnonce,galid:imstore.galid,action:"remove-favorites",imgids:imgids},function(b){response=b.split("|");a(".ims-message").fadeOut().removeClass("error").removeClass("success").addClass(response[1]).html(response[0]).fadeIn()});return false});a(".add-to-favorite-single a").click(function(){url=a(".image-wrapper img").attr("src").replace("&c=s","").replace("&c=g","").split("&id=");a.get(imstore.imstoreurl+"/ajax.php",{_wpnonce:imstore.ajaxnonce,galid:imstore.galid,action:"favorites",imgids:url[1]},function(b){response=b.split("|");a(".ims-message").fadeOut().removeClass("error").removeClass("success").addClass(response[1]).html(response[0]).fadeIn()});return false});a("#ims-color-bw").click(function(){b("g",this)});a("#ims-color-sepia").click(function(){b("s",this)});if(imstore.colorbox||typeof COLORBOX_MANUAL!="undefined"){a(".add-images-to-cart a").colorbox({width:"44%",inline:true,href:"#ims-pricelist",close:imstore.closeLinkText,onClosed:function(){a(".ims-add-error").hide();a("#ims-pricelist").hide()},onOpen:function(){a("#ims-pricelist").show();a(".add-single-cb").remove();count=a(".ims-innerbox input:checked").length;imgids=a(".ims-innerbox input:checked").map(function(){return a(this).val()}).get().join(",");a("#ims-to-cart-ids").val(imgids);a(".ims-image-count").html(count+" "+slcttxt);if(count==0)a(".ims-add-error").show()}});a(".add-images-to-cart-single a").colorbox({width:"44%",inline:true,href:"#ims-pricelist",close:imstore.closeLinkText,onClosed:function(){a(".ims-add-error").hide();a("#ims-pricelist").hide()},onLoad:function(){a("#ims-pricelist").show();url=a(".image-wrapper img").attr("src").replace("&c=s","").replace("&c=g","").split("&id=");a("#ims-to-cart-ids").val(url[1])}});a(".add-single-cb").live("click",function(){a.colorbox({width:"44%",inline:true,href:"#ims-pricelist",close:imstore.closeLinkText,onClosed:function(){a("#ims-pricelist").hide()},onComplete:function(){a.colorbox.resize()},onLoad:function(){a(".ims-image-count").html("1 "+slcttxt);a("#ims-pricelist").show();a(".add-single-cb,#cboxNext,#cboxPrevious").remove()}})});wpgalleries=imstore.wplightbox?",.gallery .gallery-icon a, .colorbox":"";if(typeof Colorbox=="object"&&!imstore.attchlink){Colorbox.photo=true;a(".ims-gallery .ims-colorbox"+wpgalleries).colorbox(Colorbox)}else if(!imstore.attchlink){a(".ims-gallery .ims-colorbox"+wpgalleries).colorbox({current:"",photo:true,preloading:true,maxWidth:"98%",maxHeight:"96%",speed:imstore.slideshowSpeed,next:imstore.nextLinkText,close:imstore.closeLinkText,previous:imstore.prevLinkText,onLoad:function(){a("#ims-to-cart-ids").val(a(this).attr("id"));if(!a("#cboxContent .add-single-cb")[0]&&a("#imstore-nav")[0])a("#cboxContent").append('<a href="#" class="add-single-cb button" rel="button">'+imstore.addtocart+"</div>")},title:function(){return a(this).find("img").attr("title")==""?" ":a(this).find("img").attr("title")}})}}if(a("#ims-thumbs")[0]){var c=a("#ims-thumbs").galleriffic({preloadAhead:10,enableTopPager:true,enableBottomPager:true,renderSSControls:true,renderNavControls:true,controlsContainerSel:"#ims-player",captionContainerSel:"#ims-caption",imageContainerSel:"#ims-slideshow",numThumbs:parseInt(imstore.numThumbs),maxPagesToShow:parseInt(imstore.maxPagesToShow),playLinkText:imstore.playLinkText,pauseLinkText:imstore.pauseLinkTex,prevLinkText:imstore.prevLinkText,nextLinkText:imstore.nextLinkText,delay:parseInt(imstore.slideshowSpeed),nextPageLinkText:imstore.nextPageLinkText,prevPageLinkText:imstore.prevPageLinkText,autoStart:imstore.autoStart,defaultTransitionDuration:parseInt(imstore.transitionTime),onSlideChange:function(b,c){a(".ims-slideshow-tools [type='checkbox']").removeAttr("checked")},onCreateImage:function(a){a.image.onload="";a.image.src=a.image.src.replace("&c=g","").replace("&c=s","");return a}})}})