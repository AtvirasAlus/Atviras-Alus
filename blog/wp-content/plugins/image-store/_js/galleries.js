var uploaderMode=0;var post_id=jQuery("#post_ID").val();jQuery(document).ready(function(a){cols=wpUploaderInit.multipart_params.cols+1;uploader.bind("UploadFile",function(b,c){setTimeout(function(){var b=a("#media-item-"+c.id);b.find(".progress").replaceWith(a('<td class="progress" colspan="'+cols+'">'+b.find(".progress").html()+"</tr>"));b.replaceWith(a('<tr id="media-item-'+c.id+'" class="media-item iedit">'+b.html()+"</tr>"))},30)});uploader.bind("FileUploaded",function(b,c,d){var e=a("#media-item-"+c.id);a("#media-item-"+c.id+" .progress").remove();if(a("li.status-publish").length<1)a('<li class="status-publish"><a href="'+imsgal.adminurl+"/post.php?post="+post_id+'&action=edit&status=publish">'+postL10n.published+' <span class="count">(<span>1</span>)</span></a></li>').prependTo(".subsubsub");else a("li.status-publish .count span").html(parseInt(jQuery("li.status-publish .count span").text())+1)});uploader.bind("Error",function(b,c){var d=a("#media-item-"+c.file.id);d.find("p").replaceWith(a('<td colspan="'+(wpUploaderInit.multipart_params.cols+1)+'">'+d.find("p").html()+"</tr>"));d.replaceWith(a('<tr id="media-item-'+file.id+'" class="media-item error">'+d.html()+"</tr>"))});uploaderMode=getUserSetting("uploader");a(".upload-html-bypass a").click(function(){deleteUserSetting("uploader");uploaderMode=0;a("#html-upload-ui").hide();a("#plupload-upload-ui").show();return false});a(".upload-flash-bypass a").click(function(){setUserSetting("uploader","1");uploaderMode=1;a("#plupload-upload-ui").hide();a("#html-upload-ui").show();return false});a(".dismiss").live("click",function(){a(this).parents(".media-item").slideUp(200,function(){a(this).remove()});return false});a("a.imsdelete").live("click",function(){a(this).parents("tr").addClass("totrash").fadeIn().fadeOut();a.get(imslocal.imsajax,{action:"deleteimage",deletefile:imsgal.deletefile,parent:a("#post_ID").val(),postid:a(this).attr("href").replace("#",""),_wpnonce:imslocal.nonceajax});if(parseInt(a("li.status-trash .count span").text())-1>0)a("li.status-trash .count span").html(parseInt(a("li.status-trash .count span").text())-1);else a("li.status-trash").remove();return false});a("a.imsupdate").live("click",function(){a(this).parents("tr").addClass("doupdate").fadeOut(function(){a(this).removeClass("doupdate")}).fadeIn();a.get(imslocal.imsajax,{action:"upadateimage",_wpnonce:imslocal.nonceajax,imgid:a(this).attr("href").replace("#",""),caption:a(this).parents("tr").find("textarea").val(),order:a(this).parents("tr").find(".column-imorder input").val(),imgtitle:a(this).parents("tr").find(".column-imtitle input").val()});return false});a("a.imstrash").live("click",function(){a(this).parents("tr").addClass("totrash").fadeIn().fadeOut();a.get(imslocal.imsajax,{action:"editimstatus",_wpnonce:imslocal.nonceajax,status:a(this).attr("name"),imgid:a(this).attr("href").replace("#","")});if(a("li.status-trash").length<1)a('<li class="status-trash"> | <a href="'+imsgal.adminurl+"/post.php?post="+a("#post_ID").val()+'&action=edit&status=trash">'+imsgal.trash+' <span class="count">(<span>1</span>)</span></a></li>').appendTo(".subsubsub");else a("li.status-trash .count span").html(parseInt(a("li.status-trash .count span").text())+1);if(parseInt(a("li.status-publish .count span").text())-1>0)a("li.status-publish .count span").html(parseInt(a("li.status-publish .count span").text())-1);else a("li.status-publish").remove();return false});a("a.imsrestore").live("click",function(){a(this).parents("tr").addClass("restore").fadeIn().fadeOut();a.get(imslocal.imsajax,{action:"editimstatus",_wpnonce:imslocal.nonceajax,status:a(this).attr("name"),imgid:a(this).attr("href").replace("#","")});if(a("li.status-publish").length<1)a('<li class="status-publish"><a href="'+imsgal.adminurl+"/post.php?post="+a("#post_ID").val()+'&action=edit&status=publish">'+postL10n.published+' <span class="count">(<span>1</span>)</span></a> | </li>').prependTo(".subsubsub");else a("li.status-publish .count span").html(parseInt(a("li.status-publish .count span").text())+1);if(parseInt(a("li.status-trash .count span").text())-1>0)a("li.status-trash .count span").html(parseInt(a("li.status-trash .count span").text())-1);else a("li.status-trash").remove();return false});a("#scannfolder").click(function(){a("#import_folder .loading").show()});var b=parseInt(a("input.sort_count").val());a("table.sort-images tbody").sortable({axis:"y",cursor:"move",helper:"clone",placeholder:"widget-placeholder",update:function(){a(this).find("tr").each(function(){a(this).find(".column-imorder input").val(b++);if(b%2!=0)a(this).removeClass("alternate").addClass("alternate");else a(this).removeClass("alternate")});b=parseInt(a("input.sort_count").val())}});a("table.sort-images tbody tr").disableSelection();a("#date").datepicker({altField:"#post_date",altFormat:"yy-m-d",dateFormat:imslocal.dateformat});a("#imsexpire").datepicker({altField:"#_ims_expire",altFormat:"yy-m-d",dateFormat:imslocal.dateformat})})